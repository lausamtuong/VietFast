<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Document</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css"
		integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
	<div class="container">
		<div class="row">
			<div class="header">
				<h1>Danh s√°ch Cookie:</h1>
			</div>
			<table class="table">
				<thead>
					<tr>
						<th scope="col">#</th>
						<th scope="col">Key</th>
						<th scope="col">Value</th>
						<th scope="col"></th>
					</tr>
				</thead>
				<tbody>

				</tbody>
			</table>
		</div>
		<br>
		<div class="row pb-4">
			<form class="row g-3" id='myform'>
				<div class="col-md-2">
					<label class="form-label">Key</label>
					<input type="text" class="form-control" id="key" required>

				</div>
				<div class="col-md-7">
					<label class="form-label">Value</label>
					<input type="text" class="form-control" id="value" required>

				</div>
				<div class="col-md-2">
					<label class="form-label">Expire Day</label>
					<input type="number" class="form-control" id="expireDay" min='1' value="1" required>

				</div>

				<div class="col-12">
					<br>
					<button id='add-btn' type='button' class="btn btn-success"
						onclick="get_and_set_cookie();">OK</button>
				</div>
			</form>
		</div>
	</div>

</body>

<script>
	function get_and_set_cookie() {
		cookie_name = document.getElementById('key').value;
		cookie_value = document.getElementById('value').value;
		expireDay = document.getElementById('expireDay').value;
		if (cookie_name != '' && cookie_value != '')
			set_cookie(cookie_name, cookie_value, expireDay);
		else alert('Error!')
		var table = document.getElementsByTagName('tbody')[0]
		table.innerHTML = '';

		show_all_cookies();
	}
	function editCookie(key, value) {
		document.getElementById('key').value = key;
		document.getElementById('value').value = value;

		get_and_set_cookie();
	}
	function set_cookie(cookie_name, cookie_value, expireDay) {
		const d = new Date();
		d.setTime(d.getTime() + (expireDay * 86400 * 1000));
		let expires = "expires=" + d.toUTCString();
		document.cookie = cookie_name + "=" + cookie_value + ";" + expires + ";path=/";
	}
	function show_all_cookies() {
		var theCookies = document.cookie.split(';');
		if (theCookies.length != 0) {
			for (var i = 0; i <= theCookies.length; i++) {
				var cookie = theCookies[i].split('=')
				var key = cookie[0]
				var value = cookie[1]
				if (value != null) {
					var table = document.getElementsByTagName('tbody')[0]
					var row = document.createElement('tr')
					row.innerHTML = `
			<td>${i + 1}</td>
			<td>${key}</td>
            <td>${value}</td>
            <td><button class="btn btn-primary" onclick="editCookie('${key}', '${value}')">Edit</button>
            <button class="btn btn-danger" onclick="deleteCookie('${key}')">Delete</button></td>
                    `
					table.appendChild(row)
				} else {
					var table = document.getElementsByTagName('tbody')[0]
					var row = document.createElement('tr')
					row.innerHTML = `
			<td></td>
			<td></td>
            <td>Empty</td>
                    `
					table.appendChild(row)
				}
			}
		}
	}

	function deleteCookie(cookie_name) {
		document.cookie = cookie_name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
		location.reload();
	}

	show_all_cookies();
</script>

</html>